<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script type="text/javascript">
        console.clear();

        function loadChatRoomList() {
            fetch("http://localhost:8090/api/v1/chat/rooms")
                .then((response) => response.json())
                .then((data) => {
                    const ulElement = document.querySelector("#chat-room-list");
                    ulElement.innerHTML = "";

                    data.forEach((room) => {
                        const liElement = document.createElement("li");
                        const createDate = room.createDate
                            .substring(2, 16)
                            .replaceAll("-", ".")
                            .replace("T", " ");

                        // XSS 방지를 위한 이스케이프 처리가 필요할 수 있습니다
                        liElement.innerHTML = `
                    ${room.id}번방 /
                    <a href='/api/v1/chat/rooms/${room.id}'>${room.roomName}</a> /
                    ${createDate}
                `;
                        ulElement.appendChild(liElement);
                    });
                })
                .catch((error) => {
                    console.error("Error fetching chat rooms:", error);
                });
        }

        loadChatRoomList();
    </script>
</head>
<body>
    <h1>채팅방 목록</h1>
    <ul id="chat-room-list">
    </ul>
</body>
</html>